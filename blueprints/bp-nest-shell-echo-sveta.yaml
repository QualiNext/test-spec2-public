spec_version: 2

inputs:
  agent_name:
    type: agent
  input_str:
    type: string
    default: new texture
    sensitive: true
    description: describe me
  tester:
    type: string
    default: yoooo
  tester2:
    type: string
    default: l.g.r
  havemesomevalue:
    type: string
    default: lololol
  morevalue:
    type: string
    default: valueiscool
  interesting:
    type: string
    default: scroller
outputs:
  out from here:
    quick: true
    value: 'lemme out'
  outer:
    quick: true
    value: 'outout'
description: 
  'i have ruined this bp sorry, yarin'
instructions:
  text: 'this is how you should operate this thingy'

grains:
  bp-shell-1:
    kind: blueprint
    env-labels:
      on-failure:
        - tomer
      on-success:
        - yarin: 'hasvalue'
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.inputs.tester}}'
        - test_update: 'testtestvalue'
        - yo: 'hoooo'
      outputs:
        - out1
        - output_str
  
  bp-shell-2:
    kind: blueprint
    depends-on: bp-shell-1
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
        - im_new: 'a new input'
      outputs:
        - out1
        - output_str
        - out_and_about

  bp-shell-3:
    kind: blueprint
    depends-on: bp-shell-1
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
        - spectacular: 'input'
      outputs:
        - out1
        - output_str
        - new_output

  bp-shell-5:
    kind: blueprint
    depends-on: bp-shell-1
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
      outputs:
        - out1
        - output_str
