spec_version: 2

inputs:
  agent_name:
    type: agent
  input_str:
    type: string
    default: some text
  tester:
    type: string
    default: yoooo
  tester2:
    type: string
    default: moooo
  havemesomevalue:
    type: string
    default: lololol
outputs:
  out from here:
    quick: true
    value: 'lemme out'
  outer:
    quick: true
    value: 'outout'

grains:
  bp-shell-1:
    kind: blueprint
    spec:
      source:
        path: blueprints/shell-simple.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.inputs.tester}}'
        - test_update: 'testtestvalue'
        - yo: 'hoooo'
      outputs:
        - out1
        - output_str
  
  bp-shell-2:
    kind: blueprint
    depends-on: bp-shell-1
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
      outputs:
        - out1
        - output_str
        - out_and_about

  bp-shell-3:
    kind: blueprint
    depends-on: bp-shell-1
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
      outputs:
        - out1
        - output_str

  bp-shell-5:
    kind: blueprint
    depends-on: bp-shell-3
    spec:
      source:
        path: blueprints/shell-echo-dynamic-out-sveta.yaml
        store: test-spec2-public
      inputs:
        - agent_name: '{{.inputs.agent_name}}'
        - input_str: '{{.grains.bp-shell-1.outputs.out1}}'
      outputs:
        - out1
        - output_str
